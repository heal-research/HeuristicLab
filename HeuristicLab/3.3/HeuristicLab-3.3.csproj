<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net7.0-windows</TargetFramework>
    <OutputType>WinExe</OutputType>
    <RootNamespace>HeuristicLab</RootNamespace>
    <AssemblyName>HeuristicLab 3.3</AssemblyName>
    <StartupObject>HeuristicLab.Program</StartupObject>
    <RunPostBuildEvent>Always</RunPostBuildEvent>
    <ApplicationIcon>HeuristicLab.ico</ApplicationIcon>
    <UseWindowsForms>true</UseWindowsForms>
    <ImportWindowsDesktopTargets>true</ImportWindowsDesktopTargets>
    <ApplicationManifest>app.manifest</ApplicationManifest>
  </PropertyGroup>
  <ItemGroup>
    <Reference Update="System.Core">
      <RequiredTargetFramework>3.5</RequiredTargetFramework>
    </Reference>
    <Reference Update="System.Xml.Linq">
      <RequiredTargetFramework>3.5</RequiredTargetFramework>
    </Reference>
  </ItemGroup>
  <ItemGroup>
    <None Update="app.manifest">
      <SubType>Designer</SubType>
    </None>
  </ItemGroup>
  <ItemGroup>
    <ProjectReference Include="..\..\HeuristicLab.PluginInfrastructure\3.3\HeuristicLab.PluginInfrastructure-3.3.csproj" />
  </ItemGroup>
  <ItemGroup>
    <None Update="GNU General Public License.txt">
      <CopyToOutputDirectory>Always</CopyToOutputDirectory>
    </None>
    <None Update="HeuristicLab 3.3 License.txt">
      <CopyToOutputDirectory>Always</CopyToOutputDirectory>
    </None>
    <Content Include="HeuristicLab.ico" />
  </ItemGroup>
  <ItemGroup>
    <PackageReference Include="System.Data.DataSetExtensions" Version="4.5.0" />
    <PackageReference Include="Microsoft.DotNet.UpgradeAssistant.Extensions.Default.Analyzers" Version="0.4.421302">
      <PrivateAssets>all</PrivateAssets>
    </PackageReference>
  </ItemGroup>
<!--  <PropertyGroup>-->
<!--    <PostBuildEvent Condition=" '$(OS)' == 'Windows_NT' ">-->
<!--set Path=%25Path%25;$(ProjectDir);$(SolutionDir)-->
<!--set ProjectDir=$(ProjectDir)-->
<!--set SolutionDir=$(SolutionDir)-->
<!--set OutDir=$(OutDir)-->
<!--set TargetDir=$(TargetDir)-->
<!--set Platform=$(PlatformName)-->
<!--set Configuration=$(ConfigurationName)-->

<!--call "$(SolutionDir)MergeConfigs.cmd"-->
<!--    </PostBuildEvent>-->
<!--    <PostBuildEvent Condition=" '$(OS)' != 'Windows_NT' ">-->
<!--export OutDir=$(OutDir)-->
<!--export ProjectDir=$(ProjectDir)-->
<!--export SolutionDir=$(SolutionDir)-->
<!--export TargetDir=$(TargetDir)-->

<!--$SolutionDir/MergeConfigs.sh-->
<!--</PostBuildEvent>-->
<!--  </PropertyGroup>-->
  <Target Name="PostBuild_Windows_NT" BeforeTargets="PostBuildEvent" Condition="'$(OS)' == 'Windows_NT'">
    <Exec Command="set Path=%25Path%25;$(ProjectDir);$(SolutionDir)&#xA;set ProjectDir=$(ProjectDir)&#xA;set SolutionDir=$(SolutionDir)&#xA;set OutDir=$(OutDir)&#xA;set TargetDir=$(TargetDir)&#xA;set Platform=$(PlatformName)&#xA;set Configuration=$(ConfigurationName)&#xA;&#xA;call &quot;$(SolutionDir)MergeConfigs.cmd&quot;" />
  </Target>
  <Target Name="PostBuild_Not_Windows_NT" AfterTargets="PostBuildEvent" Condition="'$(OS)' != 'Windows_NT'">
    <Exec Command="export OutDir=$(OutDir)&#xA;export ProjectDir=$(ProjectDir)&#xA;export SolutionDir=$(SolutionDir)&#xA;export TargetDir=$(TargetDir)&#xA;&#xA;$SolutionDir/MergeConfigs.sh" />
  </Target>
</Project>
